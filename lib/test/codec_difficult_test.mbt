// Code generated by scripts/gen_codec_tests.py. DO NOT EDIT.

///|
struct DifficultDecoded {
  big : UInt64
  zigzag : Int
  ratio : Double
  scores : Array[Double]
  items : Array[(String, Bytes, UInt64)]
  counts : Array[(String, Int)]
  choice_text : String?
  choice_number : Int?
  payload : Bytes
}

///|
struct DifficultCase {
  b64 : String
  big : UInt64
  zigzag : Int
  ratio : Double
  scores : Array[Double]
  items : Array[(String, Bytes, UInt64)]
  counts : Array[(String, Int)]
  choice_text : String?
  choice_number : Int?
  payload : Bytes
}

///|
fn decode_item(bytes : Bytes) -> (String, Bytes, UInt64) raise {
  let reader = @protobuf.BytesReader::from_bytes(bytes) as &@protobuf.Reader
  let mut name = ""
  let mut raw = b""
  let mut code = 0UL
  while true {
    let tag_result = try reader |> @protobuf.read_tag() catch {
      _ => None
    } noraise {
      v => Some(v)
    }
    match tag_result {
      Some((tag, wire_type)) =>
        match tag {
          1 => name = reader |> @protobuf.read_string()
          2 => raw = reader |> @protobuf.read_bytes()
          3 => code = reader |> @protobuf.read_fixed64()
          _ => reader |> @protobuf.read_unknown(wire_type)
        }
      None => break
    }
  }
  (name, raw, code)
}

///|
fn decode_count(bytes : Bytes) -> (String, Int) raise {
  let reader = @protobuf.BytesReader::from_bytes(bytes) as &@protobuf.Reader
  let mut key = ""
  let mut value = 0
  while true {
    let tag_result = try reader |> @protobuf.read_tag() catch {
      _ => None
    } noraise {
      v => Some(v)
    }
    match tag_result {
      Some((tag, wire_type)) =>
        match tag {
          1 => key = reader |> @protobuf.read_string()
          2 => value = reader |> @protobuf.read_int32()
          _ => reader |> @protobuf.read_unknown(wire_type)
        }
      None => break
    }
  }
  (key, value)
}

///|
fn decode_difficult(b64 : String) -> DifficultDecoded raise {
  let bytes = @protobuf.base64_decode(b64)
  let reader = @protobuf.BytesReader::from_bytes(bytes) as &@protobuf.Reader
  let mut big = 0UL
  let mut zigzag = 0
  let mut ratio = 0.0
  let scores : Array[Double] = []
  let items : Array[(String, Bytes, UInt64)] = []
  let counts : Array[(String, Int)] = []
  let mut choice_text : String? = None
  let mut choice_number : Int? = None
  let mut payload = b""
  while true {
    let tag_result = try reader |> @protobuf.read_tag() catch {
      _ => None
    } noraise {
      v => Some(v)
    }
    match tag_result {
      Some((tag, wire_type)) =>
        match tag {
          1 => big = reader |> @protobuf.read_uint64()
          2 => zigzag = (reader |> @protobuf.read_sint32()).0
          3 => ratio = reader |> @protobuf.read_double()
          4 => {
            let packed = reader
              |> @protobuf.read_packed(
                fn(r) { r |> @protobuf.read_double() },
                Some(8U),
              )
            for score in packed {
              scores.push(score)
            }
          }
          5 => items.push(reader |> @protobuf.read_bytes() |> decode_item())
          6 => counts.push(reader |> @protobuf.read_bytes() |> decode_count())
          7 => choice_text = reader |> @protobuf.read_string() |> Some
          8 => choice_number = reader |> @protobuf.read_int32() |> Some
          9 => payload = reader |> @protobuf.read_bytes()
          _ => reader |> @protobuf.read_unknown(wire_type)
        }
      None => break
    }
  }
  {
    big,
    zigzag,
    ratio,
    scores,
    items,
    counts,
    choice_text,
    choice_number,
    payload,
  }
}

///|
fn encode_item(item : (String, Bytes, UInt64)) -> Bytes raise {
  let (name, raw, code) = item
  let writer = @buffer.new()
  if name != "" {
    writer |> @protobuf.write_tag((1U, 2U))
    writer |> @protobuf.write_string(name)
  }
  if raw.length() > 0 {
    writer |> @protobuf.write_tag((2U, 2U))
    writer |> @protobuf.write_bytes(raw)
  }
  if code != 0UL {
    writer |> @protobuf.write_tag((3U, 1U))
    writer |> @protobuf.write_fixed64(code)
  }
  writer.to_bytes()
}

///|
fn encode_count(entry : (String, Int)) -> Bytes raise {
  let (key, value) = entry
  let writer = @buffer.new()
  if key != "" {
    writer |> @protobuf.write_tag((1U, 2U))
    writer |> @protobuf.write_string(key)
  }
  writer |> @protobuf.write_tag((2U, 0U))
  writer |> @protobuf.write_int32(value)
  writer.to_bytes()
}

///|
fn encode_difficult(case : DifficultCase) -> String raise {
  let writer = @buffer.new()
  if case.big != 0UL {
    writer |> @protobuf.write_tag((1U, 0U))
    writer |> @protobuf.write_uint64(case.big)
  }
  if case.zigzag != 0 {
    writer |> @protobuf.write_tag((2U, 0U))
    writer |> @protobuf.write_sint32(case.zigzag)
  }
  if case.ratio != 0.0 {
    writer |> @protobuf.write_tag((3U, 1U))
    writer |> @protobuf.write_double(case.ratio)
  }
  if case.scores.length() > 0 {
    let packed_writer = @buffer.new()
    for score in case.scores {
      packed_writer |> @protobuf.write_double(score)
    }
    writer |> @protobuf.write_tag((4U, 2U))
    writer |> @protobuf.write_bytes(packed_writer.to_bytes())
  }
  for item in case.items {
    writer |> @protobuf.write_tag((5U, 2U))
    writer |> @protobuf.write_bytes(encode_item(item))
  }
  for entry in case.counts {
    writer |> @protobuf.write_tag((6U, 2U))
    writer |> @protobuf.write_bytes(encode_count(entry))
  }
  if case.choice_text is Some(value) {
    writer |> @protobuf.write_tag((7U, 2U))
    writer |> @protobuf.write_string(value)
  }
  if case.choice_number is Some(value) {
    writer |> @protobuf.write_tag((8U, 0U))
    writer |> @protobuf.write_int32(value)
  }
  if case.payload.length() > 0 {
    writer |> @protobuf.write_tag((9U, 2U))
    writer |> @protobuf.write_bytes(case.payload)
  }
  writer.to_bytes() |> @protobuf.base64_encode
}

///|
test "difficult/messages" {
  let cases : Array[DifficultCase] = [
    {
      b64: "",
      big: 0UL,
      zigzag: 0,
      ratio: 0,
      scores: [],
      items: [],
      counts: [],
      choice_text: None,
      choice_number: None,
      payload: b"",
    },
    {
      b64: "CAEQARkAAAAAAAD4PyIQAAAAAAAA9D8AAAAAAAAEwCoPCgFhEgEBGQEAAAAAAAAAMgUKAWEQATIFCgFiEAI6BWhlbGxvSgIAAQ==",
      big: 1UL,
      zigzag: -1,
      ratio: 1.5,
      scores: [1.25, -2.5],
      items: [("a", b"\x01", 1UL)],
      counts: [("a", 1), ("b", 2)],
      choice_text: Some("hello"),
      choice_number: None,
      payload: b"\x00\x01",
    },
    {
      b64: "CP///////////wEQgIkPGQAAAAAAAAzAIhAAAAAAAAAAAAAAAAAA4FhAKhQKBWZpcnN0EgL/ABnw3ryaeFY0EjILCgNtYXgQ/////wdAAEoB/w==",
      big: 18446744073709551615UL,
      zigzag: 123456,
      ratio: -3.5,
      scores: [0, 99.5],
      items: [("first", b"\xff\x00", 1311768467463790320UL)],
      counts: [("max", 2147483647)],
      choice_text: None,
      choice_number: Some(0),
      payload: b"\xff",
    },
    {
      b64: "CICAgICAgICAgAEQ/////w8ZAAAAAAAAAEAqAwoBeCoQCgF5EgIQIBnnAwAAAAAAADIHCgNkdXAQATIHCgNkdXAQAjoFd29ybGRKAxAgMA==",
      big: 9223372036854775808UL,
      zigzag: -2147483648,
      ratio: 2,
      scores: [],
      items: [("x", b"", 0UL), ("y", b"\x10\x20", 999UL)],
      counts: [("dup", 1), ("dup", 2)],
      choice_text: Some("world"),
      choice_number: None,
      payload: b"\x10\x20\x30",
    },
    {
      b64: "COcHEM0PGW6GG/D5IQlAIhD8qfHSTWJQPwAAAAAAQI9AKhIKA21peBICAP8ZCAkKCwwNDg8qGQoEdGFpbBIIAAECAwQFBgcZBwAAAAAAAAAyCQoFYWxwaGEQZDIJCgRiZXRhEMgBMgoKBWdhbW1hEKwCQP////8HSgQA/xAg",
      big: 999UL,
      zigzag: -999,
      ratio: 3.1415899999999999,
      scores: [0.001, 1000],
      items: [
        ("mix", b"\x00\xff", 1084818905618843912UL),
        ("tail", b"\x00\x01\x02\x03\x04\x05\x06\x07", 7UL),
      ],
      counts: [("alpha", 100), ("beta", 200), ("gamma", 300)],
      choice_text: None,
      choice_number: Some(2147483647),
      payload: b"\x00\xff\x10\x20",
    },
    {
      b64: "CJWCpu/HnoSRERDywAEZldYm6AsuET4iEHe+nxov3V5Aarx0kxioiEAqEQoBbRIDAQIDGRXNWwcAAAAAMg4KAWsQgICAgPj/////AUD///////////8BSgF/",
      big: 1234567890123456789UL,
      zigzag: 12345,
      ratio: 1.0000000000000001e-9,
      scores: [123.456, 789.01199999999994],
      items: [("m", b"\x01\x02\x03", 123456789UL)],
      counts: [("k", -2147483648)],
      choice_text: None,
      choice_number: Some(-1),
      payload: b"\x7f",
    },
    {
      b64: "OgVoZWxsbw==",
      big: 0UL,
      zigzag: 0,
      ratio: 0,
      scores: [],
      items: [],
      counts: [],
      choice_text: Some("hello"),
      choice_number: None,
      payload: b"",
    },
    {
      b64: "CAEQBBmV1iboCy4RPiIgAAAAAAAAwD8AAAAAAADQPwAAAAAAAOA/AAAAAAAA8D8qFAoDYmlnEgQAAQIDGf//////////MhAKA25lZxCAgICA+P////8BMgsKA3BvcxD/////B0D///////////8BSgH/",
      big: 1UL,
      zigzag: 2,
      ratio: 1.0000000000000001e-9,
      scores: [0.125, 0.25, 0.5, 1],
      items: [("big", b"\x00\x01\x02\x03", 18446744073709551615UL)],
      counts: [("neg", -2147483648), ("pos", 2147483647)],
      choice_text: None,
      choice_number: Some(-1),
      payload: b"\xff",
    },
    {
      b64: "CH8QfRkAAAAAAAAMwCIQd76fGi/dXkBqvHSTGKiIQCoPCgFhEgEBGQEAAAAAAAAAMggKBHplcm8QADoLY2hvaWNlIHRleHRKAgAB",
      big: 127UL,
      zigzag: -63,
      ratio: -3.5,
      scores: [123.456, 789.01199999999994],
      items: [("a", b"\x01", 1UL)],
      counts: [("zero", 0)],
      choice_text: Some("choice text"),
      choice_number: None,
      payload: b"\x00\x01",
    },
    {
      b64: "CIABEICJDxkAAAAAAAACwCIYAAAAAAAA8L8AAAAAAAAAwAAAAAAAAAjAKhQKCWVtcHR5LXJhdxkqAAAAAAAAADIHCgNkdXAQATIHCgNkdXAQAkAASgMQIDA=",
      big: 128UL,
      zigzag: 123456,
      ratio: -2.25,
      scores: [-1, -2, -3],
      items: [("empty-raw", b"", 42UL)],
      counts: [("dup", 1), ("dup", 2)],
      choice_text: None,
      choice_number: Some(0),
      payload: b"\x10\x20\x30",
    },
    {
      b64: "CICAARD/////Dxluhhvw+SEJQCIQ/Knx0k1iUD8AAAAAAECPQCoUCgVmaXJzdBIC/wAZ8N68mnhWNBIyDgoBeBD///////////8BMgUKAXkQBzoFd29ybGRKBAD/ECA=",
      big: 16384UL,
      zigzag: -2147483648,
      ratio: 3.1415899999999999,
      scores: [0.001, 1000],
      items: [("first", b"\xff\x00", 1311768467463790320UL)],
      counts: [("x", -1), ("y", 7)],
      choice_text: Some("world"),
      choice_number: None,
      payload: b"\x00\xff\x10\x20",
    },
    {
      b64: "CP////8PEAEZAAAAAAAA+D8iEAAAAAAAAAAAAAAAAADgWEAqEgoDbWl4EgIA/xkICQoLDA0ODyoZCgR0YWlsEggAAQIDBAUGBxkHAAAAAAAAADILCgNtYXgQ/////wdAKkoIAAECAwQFBgc=",
      big: 4294967295UL,
      zigzag: -1,
      ratio: 1.5,
      scores: [0, 99.5],
      items: [
        ("mix", b"\x00\xff", 1084818905618843912UL),
        ("tail", b"\x00\x01\x02\x03\x04\x05\x06\x07", 7UL),
      ],
      counts: [("max", 2147483647)],
      choice_text: None,
      choice_number: Some(42),
      payload: b"\x00\x01\x02\x03\x04\x05\x06\x07",
    },
    {
      b64: "CICAgIAQEH4ZAAAAAICELkEiEAAAAAAAAPQ/AAAAAAAABMAqAwoBeCoQCgF5EgIQIBnnAwAAAAAAADIFCgFhEAEyBQoBYhACOgVoZWxsbw==",
      big: 4294967296UL,
      zigzag: 63,
      ratio: 1000000,
      scores: [1.25, -2.5],
      items: [("x", b"", 0UL), ("y", b"\x10\x20", 999UL)],
      counts: [("a", 1), ("b", 2)],
      choice_text: Some("hello"),
      choice_number: None,
      payload: b"",
    },
    {
      b64: "CICAgICAgICAgAEQfxkAAAAAAADAPyIIAAAAAAAAAABA////////////AUoB/w==",
      big: 9223372036854775808UL,
      zigzag: -64,
      ratio: 0.125,
      scores: [0],
      items: [],
      counts: [],
      choice_text: None,
      choice_number: Some(-1),
      payload: b"\xff",
    },
    {
      b64: "CP///////////wEQ/v///w8qFAoDYmlnEgQAAQIDGf//////////MhAKA25lZxCAgICA+P////8BMgsKA3BvcxD/////BzoLY2hvaWNlIHRleHRKAgAB",
      big: 18446744073709551615UL,
      zigzag: 2147483647,
      ratio: 0,
      scores: [],
      items: [("big", b"\x00\x01\x02\x03", 18446744073709551615UL)],
      counts: [("neg", -2147483648), ("pos", 2147483647)],
      choice_text: Some("choice text"),
      choice_number: None,
      payload: b"\x00\x01",
    },
    {
      b64: "CJWCpu/HnoSRERACGZXWJugLLhE+IiAAAAAAAADAPwAAAAAAANA/AAAAAAAA4D8AAAAAAADwPyoPCgFhEgEBGQEAAAAAAAAAMggKBHplcm8QAEAASgMQIDA=",
      big: 1234567890123456789UL,
      zigzag: 1,
      ratio: 1.0000000000000001e-9,
      scores: [0.125, 0.25, 0.5, 1],
      items: [("a", b"\x01", 1UL)],
      counts: [("zero", 0)],
      choice_text: None,
      choice_number: Some(0),
      payload: b"\x10\x20\x30",
    },
    {
      b64: "EAMZAAAAAAAADMAiEHe+nxov3V5Aarx0kxioiEAqFAoJZW1wdHktcmF3GSoAAAAAAAAAMgcKA2R1cBABMgcKA2R1cBACOgV3b3JsZEoEAP8QIA==",
      big: 0UL,
      zigzag: -2,
      ratio: -3.5,
      scores: [123.456, 789.01199999999994],
      items: [("empty-raw", b"", 42UL)],
      counts: [("dup", 1), ("dup", 2)],
      choice_text: Some("world"),
      choice_number: None,
      payload: b"\x00\xff\x10\x20",
    },
    {
      b64: "CAEQgAEZAAAAAAAAAsAiGAAAAAAAAPC/AAAAAAAAAMAAAAAAAAAIwCoUCgVmaXJzdBIC/wAZ8N68mnhWNBIyDgoBeBD///////////8BMgUKAXkQB0AqSggAAQIDBAUGBw==",
      big: 1UL,
      zigzag: 64,
      ratio: -2.25,
      scores: [-1, -2, -3],
      items: [("first", b"\xff\x00", 1311768467463790320UL)],
      counts: [("x", -1), ("y", 7)],
      choice_text: None,
      choice_number: Some(42),
      payload: b"\x00\x01\x02\x03\x04\x05\x06\x07",
    },
    {
      b64: "CH8Q/4gPGW6GG/D5IQlAIhD8qfHSTWJQPwAAAAAAQI9AKhIKA21peBICAP8ZCAkKCwwNDg8qGQoEdGFpbBIIAAECAwQFBgcZBwAAAAAAAAAyCwoDbWF4EP////8HOgVoZWxsbw==",
      big: 127UL,
      zigzag: -123456,
      ratio: 3.1415899999999999,
      scores: [0.001, 1000],
      items: [
        ("mix", b"\x00\xff", 1084818905618843912UL),
        ("tail", b"\x00\x01\x02\x03\x04\x05\x06\x07", 7UL),
      ],
      counts: [("max", 2147483647)],
      choice_text: Some("hello"),
      choice_number: None,
      payload: b"",
    },
    {
      b64: "CIABGQAAAAAAAPg/IhAAAAAAAAAAAAAAAAAA4FhAKgMKAXgqEAoBeRICECAZ5wMAAAAAAAAyBQoBYRABMgUKAWIQAkD///////////8BSgH/",
      big: 128UL,
      zigzag: 0,
      ratio: 1.5,
      scores: [0, 99.5],
      items: [("x", b"", 0UL), ("y", b"\x10\x20", 999UL)],
      counts: [("a", 1), ("b", 2)],
      choice_text: None,
      choice_number: Some(-1),
      payload: b"\xff",
    },
    {
      b64: "CICAARAEGQAAAACAhC5BIhAAAAAAAAD0PwAAAAAAAATAOgtjaG9pY2UgdGV4dEoCAAE=",
      big: 16384UL,
      zigzag: 2,
      ratio: 1000000,
      scores: [1.25, -2.5],
      items: [],
      counts: [],
      choice_text: Some("choice text"),
      choice_number: None,
      payload: b"\x00\x01",
    },
    {
      b64: "CP////8PEH0ZAAAAAAAAwD8iCAAAAAAAAAAAKhQKA2JpZxIEAAECAxn//////////zIQCgNuZWcQgICAgPj/////ATILCgNwb3MQ/////wdAAEoDECAw",
      big: 4294967295UL,
      zigzag: -63,
      ratio: 0.125,
      scores: [0],
      items: [("big", b"\x00\x01\x02\x03", 18446744073709551615UL)],
      counts: [("neg", -2147483648), ("pos", 2147483647)],
      choice_text: None,
      choice_number: Some(0),
      payload: b"\x10\x20\x30",
    },
    {
      b64: "CICAgIAQEICJDyoPCgFhEgEBGQEAAAAAAAAAMggKBHplcm8QADoFd29ybGRKBAD/ECA=",
      big: 4294967296UL,
      zigzag: 123456,
      ratio: 0,
      scores: [],
      items: [("a", b"\x01", 1UL)],
      counts: [("zero", 0)],
      choice_text: Some("world"),
      choice_number: None,
      payload: b"\x00\xff\x10\x20",
    },
    {
      b64: "CICAgICAgICAgAEQ/////w8ZldYm6AsuET4iIAAAAAAAAMA/AAAAAAAA0D8AAAAAAADgPwAAAAAAAPA/KhQKCWVtcHR5LXJhdxkqAAAAAAAAADIHCgNkdXAQATIHCgNkdXAQAkAqSggAAQIDBAUGBw==",
      big: 9223372036854775808UL,
      zigzag: -2147483648,
      ratio: 1.0000000000000001e-9,
      scores: [0.125, 0.25, 0.5, 1],
      items: [("empty-raw", b"", 42UL)],
      counts: [("dup", 1), ("dup", 2)],
      choice_text: None,
      choice_number: Some(42),
      payload: b"\x00\x01\x02\x03\x04\x05\x06\x07",
    },
    {
      b64: "CP///////////wEQARkAAAAAAAAMwCIQd76fGi/dXkBqvHSTGKiIQCoUCgVmaXJzdBIC/wAZ8N68mnhWNBIyDgoBeBD///////////8BMgUKAXkQBzoFaGVsbG8=",
      big: 18446744073709551615UL,
      zigzag: -1,
      ratio: -3.5,
      scores: [123.456, 789.01199999999994],
      items: [("first", b"\xff\x00", 1311768467463790320UL)],
      counts: [("x", -1), ("y", 7)],
      choice_text: Some("hello"),
      choice_number: None,
      payload: b"",
    },
    {
      b64: "CJWCpu/HnoSRERB+GQAAAAAAAALAIhgAAAAAAADwvwAAAAAAAADAAAAAAAAACMAqEgoDbWl4EgIA/xkICQoLDA0ODyoZCgR0YWlsEggAAQIDBAUGBxkHAAAAAAAAADILCgNtYXgQ/////wdA////////////AUoB/w==",
      big: 1234567890123456789UL,
      zigzag: 63,
      ratio: -2.25,
      scores: [-1, -2, -3],
      items: [
        ("mix", b"\x00\xff", 1084818905618843912UL),
        ("tail", b"\x00\x01\x02\x03\x04\x05\x06\x07", 7UL),
      ],
      counts: [("max", 2147483647)],
      choice_text: None,
      choice_number: Some(-1),
      payload: b"\xff",
    },
    {
      b64: "EH8ZboYb8PkhCUAiEPyp8dJNYlA/AAAAAABAj0AqAwoBeCoQCgF5EgIQIBnnAwAAAAAAADIFCgFhEAEyBQoBYhACOgtjaG9pY2UgdGV4dEoCAAE=",
      big: 0UL,
      zigzag: -64,
      ratio: 3.1415899999999999,
      scores: [0.001, 1000],
      items: [("x", b"", 0UL), ("y", b"\x10\x20", 999UL)],
      counts: [("a", 1), ("b", 2)],
      choice_text: Some("choice text"),
      choice_number: None,
      payload: b"\x00\x01",
    },
    {
      b64: "CAEQ/v///w8ZAAAAAAAA+D8iEAAAAAAAAAAAAAAAAADgWEBAAEoDECAw",
      big: 1UL,
      zigzag: 2147483647,
      ratio: 1.5,
      scores: [0, 99.5],
      items: [],
      counts: [],
      choice_text: None,
      choice_number: Some(0),
      payload: b"\x10\x20\x30",
    },
    {
      b64: "CH8QAhkAAAAAgIQuQSIQAAAAAAAA9D8AAAAAAAAEwCoUCgNiaWcSBAABAgMZ//////////8yEAoDbmVnEICAgID4/////wEyCwoDcG9zEP////8HOgV3b3JsZEoEAP8QIA==",
      big: 127UL,
      zigzag: 1,
      ratio: 1000000,
      scores: [1.25, -2.5],
      items: [("big", b"\x00\x01\x02\x03", 18446744073709551615UL)],
      counts: [("neg", -2147483648), ("pos", 2147483647)],
      choice_text: Some("world"),
      choice_number: None,
      payload: b"\x00\xff\x10\x20",
    },
    {
      b64: "CIABEAMZAAAAAAAAwD8iCAAAAAAAAAAAKg8KAWESAQEZAQAAAAAAAAAyCAoEemVybxAAQCpKCAABAgMEBQYH",
      big: 128UL,
      zigzag: -2,
      ratio: 0.125,
      scores: [0],
      items: [("a", b"\x01", 1UL)],
      counts: [("zero", 0)],
      choice_text: None,
      choice_number: Some(42),
      payload: b"\x00\x01\x02\x03\x04\x05\x06\x07",
    },
    {
      b64: "CICAARCAASoUCgllbXB0eS1yYXcZKgAAAAAAAAAyBwoDZHVwEAEyBwoDZHVwEAI6BWhlbGxv",
      big: 16384UL,
      zigzag: 64,
      ratio: 0,
      scores: [],
      items: [("empty-raw", b"", 42UL)],
      counts: [("dup", 1), ("dup", 2)],
      choice_text: Some("hello"),
      choice_number: None,
      payload: b"",
    },
    {
      b64: "CP////8PEP+IDxmV1iboCy4RPiIgAAAAAAAAwD8AAAAAAADQPwAAAAAAAOA/AAAAAAAA8D8qFAoFZmlyc3QSAv8AGfDevJp4VjQSMg4KAXgQ////////////ATIFCgF5EAdA////////////AUoB/w==",
      big: 4294967295UL,
      zigzag: -123456,
      ratio: 1.0000000000000001e-9,
      scores: [0.125, 0.25, 0.5, 1],
      items: [("first", b"\xff\x00", 1311768467463790320UL)],
      counts: [("x", -1), ("y", 7)],
      choice_text: None,
      choice_number: Some(-1),
      payload: b"\xff",
    },
    {
      b64: "CICAgIAQGQAAAAAAAAzAIhB3vp8aL91eQGq8dJMYqIhAKhIKA21peBICAP8ZCAkKCwwNDg8qGQoEdGFpbBIIAAECAwQFBgcZBwAAAAAAAAAyCwoDbWF4EP////8HOgtjaG9pY2UgdGV4dEoCAAE=",
      big: 4294967296UL,
      zigzag: 0,
      ratio: -3.5,
      scores: [123.456, 789.01199999999994],
      items: [
        ("mix", b"\x00\xff", 1084818905618843912UL),
        ("tail", b"\x00\x01\x02\x03\x04\x05\x06\x07", 7UL),
      ],
      counts: [("max", 2147483647)],
      choice_text: Some("choice text"),
      choice_number: None,
      payload: b"\x00\x01",
    },
    {
      b64: "CICAgICAgICAgAEQBBkAAAAAAAACwCIYAAAAAAAA8L8AAAAAAAAAwAAAAAAAAAjAKgMKAXgqEAoBeRICECAZ5wMAAAAAAAAyBQoBYRABMgUKAWIQAkAASgMQIDA=",
      big: 9223372036854775808UL,
      zigzag: 2,
      ratio: -2.25,
      scores: [-1, -2, -3],
      items: [("x", b"", 0UL), ("y", b"\x10\x20", 999UL)],
      counts: [("a", 1), ("b", 2)],
      choice_text: None,
      choice_number: Some(0),
      payload: b"\x10\x20\x30",
    },
    {
      b64: "CP///////////wEQfRluhhvw+SEJQCIQ/Knx0k1iUD8AAAAAAECPQDoFd29ybGRKBAD/ECA=",
      big: 18446744073709551615UL,
      zigzag: -63,
      ratio: 3.1415899999999999,
      scores: [0.001, 1000],
      items: [],
      counts: [],
      choice_text: Some("world"),
      choice_number: None,
      payload: b"\x00\xff\x10\x20",
    },
    {
      b64: "CJWCpu/HnoSRERCAiQ8ZAAAAAAAA+D8iEAAAAAAAAAAAAAAAAADgWEAqFAoDYmlnEgQAAQIDGf//////////MhAKA25lZxCAgICA+P////8BMgsKA3BvcxD/////B0AqSggAAQIDBAUGBw==",
      big: 1234567890123456789UL,
      zigzag: 123456,
      ratio: 1.5,
      scores: [0, 99.5],
      items: [("big", b"\x00\x01\x02\x03", 18446744073709551615UL)],
      counts: [("neg", -2147483648), ("pos", 2147483647)],
      choice_text: None,
      choice_number: Some(42),
      payload: b"\x00\x01\x02\x03\x04\x05\x06\x07",
    },
    {
      b64: "EP////8PGQAAAACAhC5BIhAAAAAAAAD0PwAAAAAAAATAKg8KAWESAQEZAQAAAAAAAAAyCAoEemVybxAAOgVoZWxsbw==",
      big: 0UL,
      zigzag: -2147483648,
      ratio: 1000000,
      scores: [1.25, -2.5],
      items: [("a", b"\x01", 1UL)],
      counts: [("zero", 0)],
      choice_text: Some("hello"),
      choice_number: None,
      payload: b"",
    },
    {
      b64: "CAEQARkAAAAAAADAPyIIAAAAAAAAAAAqFAoJZW1wdHktcmF3GSoAAAAAAAAAMgcKA2R1cBABMgcKA2R1cBACQP///////////wFKAf8=",
      big: 1UL,
      zigzag: -1,
      ratio: 0.125,
      scores: [0],
      items: [("empty-raw", b"", 42UL)],
      counts: [("dup", 1), ("dup", 2)],
      choice_text: None,
      choice_number: Some(-1),
      payload: b"\xff",
    },
    {
      b64: "CH8QfioUCgVmaXJzdBIC/wAZ8N68mnhWNBIyDgoBeBD///////////8BMgUKAXkQBzoLY2hvaWNlIHRleHRKAgAB",
      big: 127UL,
      zigzag: 63,
      ratio: 0,
      scores: [],
      items: [("first", b"\xff\x00", 1311768467463790320UL)],
      counts: [("x", -1), ("y", 7)],
      choice_text: Some("choice text"),
      choice_number: None,
      payload: b"\x00\x01",
    },
    {
      b64: "CIABEH8ZldYm6AsuET4iIAAAAAAAAMA/AAAAAAAA0D8AAAAAAADgPwAAAAAAAPA/KhIKA21peBICAP8ZCAkKCwwNDg8qGQoEdGFpbBIIAAECAwQFBgcZBwAAAAAAAAAyCwoDbWF4EP////8HQABKAxAgMA==",
      big: 128UL,
      zigzag: -64,
      ratio: 1.0000000000000001e-9,
      scores: [0.125, 0.25, 0.5, 1],
      items: [
        ("mix", b"\x00\xff", 1084818905618843912UL),
        ("tail", b"\x00\x01\x02\x03\x04\x05\x06\x07", 7UL),
      ],
      counts: [("max", 2147483647)],
      choice_text: None,
      choice_number: Some(0),
      payload: b"\x10\x20\x30",
    },
    {
      b64: "CICAARD+////DxkAAAAAAAAMwCIQd76fGi/dXkBqvHSTGKiIQCoDCgF4KhAKAXkSAhAgGecDAAAAAAAAMgUKAWEQATIFCgFiEAI6BXdvcmxkSgQA/xAg",
      big: 16384UL,
      zigzag: 2147483647,
      ratio: -3.5,
      scores: [123.456, 789.01199999999994],
      items: [("x", b"", 0UL), ("y", b"\x10\x20", 999UL)],
      counts: [("a", 1), ("b", 2)],
      choice_text: Some("world"),
      choice_number: None,
      payload: b"\x00\xff\x10\x20",
    },
    {
      b64: "CP////8PEAIZAAAAAAAAAsAiGAAAAAAAAPC/AAAAAAAAAMAAAAAAAAAIwEAqSggAAQIDBAUGBw==",
      big: 4294967295UL,
      zigzag: 1,
      ratio: -2.25,
      scores: [-1, -2, -3],
      items: [],
      counts: [],
      choice_text: None,
      choice_number: Some(42),
      payload: b"\x00\x01\x02\x03\x04\x05\x06\x07",
    },
    {
      b64: "CICAgIAQEAMZboYb8PkhCUAiEPyp8dJNYlA/AAAAAABAj0AqFAoDYmlnEgQAAQIDGf//////////MhAKA25lZxCAgICA+P////8BMgsKA3BvcxD/////BzoFaGVsbG8=",
      big: 4294967296UL,
      zigzag: -2,
      ratio: 3.1415899999999999,
      scores: [0.001, 1000],
      items: [("big", b"\x00\x01\x02\x03", 18446744073709551615UL)],
      counts: [("neg", -2147483648), ("pos", 2147483647)],
      choice_text: Some("hello"),
      choice_number: None,
      payload: b"",
    },
    {
      b64: "CICAgICAgICAgAEQgAEZAAAAAAAA+D8iEAAAAAAAAAAAAAAAAADgWEAqDwoBYRIBARkBAAAAAAAAADIICgR6ZXJvEABA////////////AUoB/w==",
      big: 9223372036854775808UL,
      zigzag: 64,
      ratio: 1.5,
      scores: [0, 99.5],
      items: [("a", b"\x01", 1UL)],
      counts: [("zero", 0)],
      choice_text: None,
      choice_number: Some(-1),
      payload: b"\xff",
    },
    {
      b64: "CP///////////wEQ/4gPGQAAAACAhC5BIhAAAAAAAAD0PwAAAAAAAATAKhQKCWVtcHR5LXJhdxkqAAAAAAAAADIHCgNkdXAQATIHCgNkdXAQAjoLY2hvaWNlIHRleHRKAgAB",
      big: 18446744073709551615UL,
      zigzag: -123456,
      ratio: 1000000,
      scores: [1.25, -2.5],
      items: [("empty-raw", b"", 42UL)],
      counts: [("dup", 1), ("dup", 2)],
      choice_text: Some("choice text"),
      choice_number: None,
      payload: b"\x00\x01",
    },
    {
      b64: "CJWCpu/HnoSRERkAAAAAAADAPyIIAAAAAAAAAAAqFAoFZmlyc3QSAv8AGfDevJp4VjQSMg4KAXgQ////////////ATIFCgF5EAdAAEoDECAw",
      big: 1234567890123456789UL,
      zigzag: 0,
      ratio: 0.125,
      scores: [0],
      items: [("first", b"\xff\x00", 1311768467463790320UL)],
      counts: [("x", -1), ("y", 7)],
      choice_text: None,
      choice_number: Some(0),
      payload: b"\x10\x20\x30",
    },
    {
      b64: "EAQqEgoDbWl4EgIA/xkICQoLDA0ODyoZCgR0YWlsEggAAQIDBAUGBxkHAAAAAAAAADILCgNtYXgQ/////wc6BXdvcmxkSgQA/xAg",
      big: 0UL,
      zigzag: 2,
      ratio: 0,
      scores: [],
      items: [
        ("mix", b"\x00\xff", 1084818905618843912UL),
        ("tail", b"\x00\x01\x02\x03\x04\x05\x06\x07", 7UL),
      ],
      counts: [("max", 2147483647)],
      choice_text: Some("world"),
      choice_number: None,
      payload: b"\x00\xff\x10\x20",
    },
    {
      b64: "CAEQfRmV1iboCy4RPiIgAAAAAAAAwD8AAAAAAADQPwAAAAAAAOA/AAAAAAAA8D8qAwoBeCoQCgF5EgIQIBnnAwAAAAAAADIFCgFhEAEyBQoBYhACQCpKCAABAgMEBQYH",
      big: 1UL,
      zigzag: -63,
      ratio: 1.0000000000000001e-9,
      scores: [0.125, 0.25, 0.5, 1],
      items: [("x", b"", 0UL), ("y", b"\x10\x20", 999UL)],
      counts: [("a", 1), ("b", 2)],
      choice_text: None,
      choice_number: Some(42),
      payload: b"\x00\x01\x02\x03\x04\x05\x06\x07",
    },
    {
      b64: "CH8QgIkPGQAAAAAAAAzAIhB3vp8aL91eQGq8dJMYqIhAOgVoZWxsbw==",
      big: 127UL,
      zigzag: 123456,
      ratio: -3.5,
      scores: [123.456, 789.01199999999994],
      items: [],
      counts: [],
      choice_text: Some("hello"),
      choice_number: None,
      payload: b"",
    },
    {
      b64: "CIABEP////8PGQAAAAAAAALAIhgAAAAAAADwvwAAAAAAAADAAAAAAAAACMAqFAoDYmlnEgQAAQIDGf//////////MhAKA25lZxCAgICA+P////8BMgsKA3BvcxD/////B0D///////////8BSgH/",
      big: 128UL,
      zigzag: -2147483648,
      ratio: -2.25,
      scores: [-1, -2, -3],
      items: [("big", b"\x00\x01\x02\x03", 18446744073709551615UL)],
      counts: [("neg", -2147483648), ("pos", 2147483647)],
      choice_text: None,
      choice_number: Some(-1),
      payload: b"\xff",
    },
    {
      b64: "CICAARABGW6GG/D5IQlAIhD8qfHSTWJQPwAAAAAAQI9AKg8KAWESAQEZAQAAAAAAAAAyCAoEemVybxAAOgtjaG9pY2UgdGV4dEoCAAE=",
      big: 16384UL,
      zigzag: -1,
      ratio: 3.1415899999999999,
      scores: [0.001, 1000],
      items: [("a", b"\x01", 1UL)],
      counts: [("zero", 0)],
      choice_text: Some("choice text"),
      choice_number: None,
      payload: b"\x00\x01",
    },
    {
      b64: "CP////8PEH4ZAAAAAAAA+D8iEAAAAAAAAAAAAAAAAADgWEAqFAoJZW1wdHktcmF3GSoAAAAAAAAAMgcKA2R1cBABMgcKA2R1cBACQABKAxAgMA==",
      big: 4294967295UL,
      zigzag: 63,
      ratio: 1.5,
      scores: [0, 99.5],
      items: [("empty-raw", b"", 42UL)],
      counts: [("dup", 1), ("dup", 2)],
      choice_text: None,
      choice_number: Some(0),
      payload: b"\x10\x20\x30",
    },
    {
      b64: "CICAgIAQEH8ZAAAAAICELkEiEAAAAAAAAPQ/AAAAAAAABMAqFAoFZmlyc3QSAv8AGfDevJp4VjQSMg4KAXgQ////////////ATIFCgF5EAc6BXdvcmxkSgQA/xAg",
      big: 4294967296UL,
      zigzag: -64,
      ratio: 1000000,
      scores: [1.25, -2.5],
      items: [("first", b"\xff\x00", 1311768467463790320UL)],
      counts: [("x", -1), ("y", 7)],
      choice_text: Some("world"),
      choice_number: None,
      payload: b"\x00\xff\x10\x20",
    },
    {
      b64: "CICAgICAgICAgAEQ/v///w8ZAAAAAAAAwD8iCAAAAAAAAAAAKhIKA21peBICAP8ZCAkKCwwNDg8qGQoEdGFpbBIIAAECAwQFBgcZBwAAAAAAAAAyCwoDbWF4EP////8HQCpKCAABAgMEBQYH",
      big: 9223372036854775808UL,
      zigzag: 2147483647,
      ratio: 0.125,
      scores: [0],
      items: [
        ("mix", b"\x00\xff", 1084818905618843912UL),
        ("tail", b"\x00\x01\x02\x03\x04\x05\x06\x07", 7UL),
      ],
      counts: [("max", 2147483647)],
      choice_text: None,
      choice_number: Some(42),
      payload: b"\x00\x01\x02\x03\x04\x05\x06\x07",
    },
    {
      b64: "CP///////////wEQAioDCgF4KhAKAXkSAhAgGecDAAAAAAAAMgUKAWEQATIFCgFiEAI6BWhlbGxv",
      big: 18446744073709551615UL,
      zigzag: 1,
      ratio: 0,
      scores: [],
      items: [("x", b"", 0UL), ("y", b"\x10\x20", 999UL)],
      counts: [("a", 1), ("b", 2)],
      choice_text: Some("hello"),
      choice_number: None,
      payload: b"",
    },
    {
      b64: "CJWCpu/HnoSRERADGZXWJugLLhE+IiAAAAAAAADAPwAAAAAAANA/AAAAAAAA4D8AAAAAAADwP0D///////////8BSgH/",
      big: 1234567890123456789UL,
      zigzag: -2,
      ratio: 1.0000000000000001e-9,
      scores: [0.125, 0.25, 0.5, 1],
      items: [],
      counts: [],
      choice_text: None,
      choice_number: Some(-1),
      payload: b"\xff",
    },
    {
      b64: "EIABGQAAAAAAAAzAIhB3vp8aL91eQGq8dJMYqIhAKhQKA2JpZxIEAAECAxn//////////zIQCgNuZWcQgICAgPj/////ATILCgNwb3MQ/////wc6C2Nob2ljZSB0ZXh0SgIAAQ==",
      big: 0UL,
      zigzag: 64,
      ratio: -3.5,
      scores: [123.456, 789.01199999999994],
      items: [("big", b"\x00\x01\x02\x03", 18446744073709551615UL)],
      counts: [("neg", -2147483648), ("pos", 2147483647)],
      choice_text: Some("choice text"),
      choice_number: None,
      payload: b"\x00\x01",
    },
    {
      b64: "CAEQ/4gPGQAAAAAAAALAIhgAAAAAAADwvwAAAAAAAADAAAAAAAAACMAqDwoBYRIBARkBAAAAAAAAADIICgR6ZXJvEABAAEoDECAw",
      big: 1UL,
      zigzag: -123456,
      ratio: -2.25,
      scores: [-1, -2, -3],
      items: [("a", b"\x01", 1UL)],
      counts: [("zero", 0)],
      choice_text: None,
      choice_number: Some(0),
      payload: b"\x10\x20\x30",
    },
    {
      b64: "CH8ZboYb8PkhCUAiEPyp8dJNYlA/AAAAAABAj0AqFAoJZW1wdHktcmF3GSoAAAAAAAAAMgcKA2R1cBABMgcKA2R1cBACOgV3b3JsZEoEAP8QIA==",
      big: 127UL,
      zigzag: 0,
      ratio: 3.1415899999999999,
      scores: [0.001, 1000],
      items: [("empty-raw", b"", 42UL)],
      counts: [("dup", 1), ("dup", 2)],
      choice_text: Some("world"),
      choice_number: None,
      payload: b"\x00\xff\x10\x20",
    },
    {
      b64: "CIABEAQZAAAAAAAA+D8iEAAAAAAAAAAAAAAAAADgWEAqFAoFZmlyc3QSAv8AGfDevJp4VjQSMg4KAXgQ////////////ATIFCgF5EAdAKkoIAAECAwQFBgc=",
      big: 128UL,
      zigzag: 2,
      ratio: 1.5,
      scores: [0, 99.5],
      items: [("first", b"\xff\x00", 1311768467463790320UL)],
      counts: [("x", -1), ("y", 7)],
      choice_text: None,
      choice_number: Some(42),
      payload: b"\x00\x01\x02\x03\x04\x05\x06\x07",
    },
    {
      b64: "CICAARB9GQAAAACAhC5BIhAAAAAAAAD0PwAAAAAAAATAKhIKA21peBICAP8ZCAkKCwwNDg8qGQoEdGFpbBIIAAECAwQFBgcZBwAAAAAAAAAyCwoDbWF4EP////8HOgVoZWxsbw==",
      big: 16384UL,
      zigzag: -63,
      ratio: 1000000,
      scores: [1.25, -2.5],
      items: [
        ("mix", b"\x00\xff", 1084818905618843912UL),
        ("tail", b"\x00\x01\x02\x03\x04\x05\x06\x07", 7UL),
      ],
      counts: [("max", 2147483647)],
      choice_text: Some("hello"),
      choice_number: None,
      payload: b"",
    },
    {
      b64: "CP////8PEICJDxkAAAAAAADAPyIIAAAAAAAAAAAqAwoBeCoQCgF5EgIQIBnnAwAAAAAAADIFCgFhEAEyBQoBYhACQP///////////wFKAf8=",
      big: 4294967295UL,
      zigzag: 123456,
      ratio: 0.125,
      scores: [0],
      items: [("x", b"", 0UL), ("y", b"\x10\x20", 999UL)],
      counts: [("a", 1), ("b", 2)],
      choice_text: None,
      choice_number: Some(-1),
      payload: b"\xff",
    },
    {
      b64: "CICAgIAQEP////8POgtjaG9pY2UgdGV4dEoCAAE=",
      big: 4294967296UL,
      zigzag: -2147483648,
      ratio: 0,
      scores: [],
      items: [],
      counts: [],
      choice_text: Some("choice text"),
      choice_number: None,
      payload: b"\x00\x01",
    },
    {
      b64: "CICAgICAgICAgAEQARmV1iboCy4RPiIgAAAAAAAAwD8AAAAAAADQPwAAAAAAAOA/AAAAAAAA8D8qFAoDYmlnEgQAAQIDGf//////////MhAKA25lZxCAgICA+P////8BMgsKA3BvcxD/////B0AASgMQIDA=",
      big: 9223372036854775808UL,
      zigzag: -1,
      ratio: 1.0000000000000001e-9,
      scores: [0.125, 0.25, 0.5, 1],
      items: [("big", b"\x00\x01\x02\x03", 18446744073709551615UL)],
      counts: [("neg", -2147483648), ("pos", 2147483647)],
      choice_text: None,
      choice_number: Some(0),
      payload: b"\x10\x20\x30",
    },
    {
      b64: "CP///////////wEQfhkAAAAAAAAMwCIQd76fGi/dXkBqvHSTGKiIQCoPCgFhEgEBGQEAAAAAAAAAMggKBHplcm8QADoFd29ybGRKBAD/ECA=",
      big: 18446744073709551615UL,
      zigzag: 63,
      ratio: -3.5,
      scores: [123.456, 789.01199999999994],
      items: [("a", b"\x01", 1UL)],
      counts: [("zero", 0)],
      choice_text: Some("world"),
      choice_number: None,
      payload: b"\x00\xff\x10\x20",
    },
    {
      b64: "CJWCpu/HnoSRERB/GQAAAAAAAALAIhgAAAAAAADwvwAAAAAAAADAAAAAAAAACMAqFAoJZW1wdHktcmF3GSoAAAAAAAAAMgcKA2R1cBABMgcKA2R1cBACQCpKCAABAgMEBQYH",
      big: 1234567890123456789UL,
      zigzag: -64,
      ratio: -2.25,
      scores: [-1, -2, -3],
      items: [("empty-raw", b"", 42UL)],
      counts: [("dup", 1), ("dup", 2)],
      choice_text: None,
      choice_number: Some(42),
      payload: b"\x00\x01\x02\x03\x04\x05\x06\x07",
    },
    {
      b64: "EP7///8PGW6GG/D5IQlAIhD8qfHSTWJQPwAAAAAAQI9AKhQKBWZpcnN0EgL/ABnw3ryaeFY0EjIOCgF4EP///////////wEyBQoBeRAHOgVoZWxsbw==",
      big: 0UL,
      zigzag: 2147483647,
      ratio: 3.1415899999999999,
      scores: [0.001, 1000],
      items: [("first", b"\xff\x00", 1311768467463790320UL)],
      counts: [("x", -1), ("y", 7)],
      choice_text: Some("hello"),
      choice_number: None,
      payload: b"",
    },
    {
      b64: "CAEQAhkAAAAAAAD4PyIQAAAAAAAAAAAAAAAAAOBYQCoSCgNtaXgSAgD/GQgJCgsMDQ4PKhkKBHRhaWwSCAABAgMEBQYHGQcAAAAAAAAAMgsKA21heBD/////B0D///////////8BSgH/",
      big: 1UL,
      zigzag: 1,
      ratio: 1.5,
      scores: [0, 99.5],
      items: [
        ("mix", b"\x00\xff", 1084818905618843912UL),
        ("tail", b"\x00\x01\x02\x03\x04\x05\x06\x07", 7UL),
      ],
      counts: [("max", 2147483647)],
      choice_text: None,
      choice_number: Some(-1),
      payload: b"\xff",
    },
    {
      b64: "CH8QAxkAAAAAgIQuQSIQAAAAAAAA9D8AAAAAAAAEwCoDCgF4KhAKAXkSAhAgGecDAAAAAAAAMgUKAWEQATIFCgFiEAI6C2Nob2ljZSB0ZXh0SgIAAQ==",
      big: 127UL,
      zigzag: -2,
      ratio: 1000000,
      scores: [1.25, -2.5],
      items: [("x", b"", 0UL), ("y", b"\x10\x20", 999UL)],
      counts: [("a", 1), ("b", 2)],
      choice_text: Some("choice text"),
      choice_number: None,
      payload: b"\x00\x01",
    },
    {
      b64: "CIABEIABGQAAAAAAAMA/IggAAAAAAAAAAEAASgMQIDA=",
      big: 128UL,
      zigzag: 64,
      ratio: 0.125,
      scores: [0],
      items: [],
      counts: [],
      choice_text: None,
      choice_number: Some(0),
      payload: b"\x10\x20\x30",
    },
    {
      b64: "CICAARD/iA8qFAoDYmlnEgQAAQIDGf//////////MhAKA25lZxCAgICA+P////8BMgsKA3BvcxD/////BzoFd29ybGRKBAD/ECA=",
      big: 16384UL,
      zigzag: -123456,
      ratio: 0,
      scores: [],
      items: [("big", b"\x00\x01\x02\x03", 18446744073709551615UL)],
      counts: [("neg", -2147483648), ("pos", 2147483647)],
      choice_text: Some("world"),
      choice_number: None,
      payload: b"\x00\xff\x10\x20",
    },
    {
      b64: "CP////8PGZXWJugLLhE+IiAAAAAAAADAPwAAAAAAANA/AAAAAAAA4D8AAAAAAADwPyoPCgFhEgEBGQEAAAAAAAAAMggKBHplcm8QAEAqSggAAQIDBAUGBw==",
      big: 4294967295UL,
      zigzag: 0,
      ratio: 1.0000000000000001e-9,
      scores: [0.125, 0.25, 0.5, 1],
      items: [("a", b"\x01", 1UL)],
      counts: [("zero", 0)],
      choice_text: None,
      choice_number: Some(42),
      payload: b"\x00\x01\x02\x03\x04\x05\x06\x07",
    },
    {
      b64: "CICAgIAQEAQZAAAAAAAADMAiEHe+nxov3V5Aarx0kxioiEAqFAoJZW1wdHktcmF3GSoAAAAAAAAAMgcKA2R1cBABMgcKA2R1cBACOgVoZWxsbw==",
      big: 4294967296UL,
      zigzag: 2,
      ratio: -3.5,
      scores: [123.456, 789.01199999999994],
      items: [("empty-raw", b"", 42UL)],
      counts: [("dup", 1), ("dup", 2)],
      choice_text: Some("hello"),
      choice_number: None,
      payload: b"",
    },
    {
      b64: "CICAgICAgICAgAEQfRkAAAAAAAACwCIYAAAAAAAA8L8AAAAAAAAAwAAAAAAAAAjAKhQKBWZpcnN0EgL/ABnw3ryaeFY0EjIOCgF4EP///////////wEyBQoBeRAHQP///////////wFKAf8=",
      big: 9223372036854775808UL,
      zigzag: -63,
      ratio: -2.25,
      scores: [-1, -2, -3],
      items: [("first", b"\xff\x00", 1311768467463790320UL)],
      counts: [("x", -1), ("y", 7)],
      choice_text: None,
      choice_number: Some(-1),
      payload: b"\xff",
    },
    {
      b64: "CP///////////wEQgIkPGW6GG/D5IQlAIhD8qfHSTWJQPwAAAAAAQI9AKhIKA21peBICAP8ZCAkKCwwNDg8qGQoEdGFpbBIIAAECAwQFBgcZBwAAAAAAAAAyCwoDbWF4EP////8HOgtjaG9pY2UgdGV4dEoCAAE=",
      big: 18446744073709551615UL,
      zigzag: 123456,
      ratio: 3.1415899999999999,
      scores: [0.001, 1000],
      items: [
        ("mix", b"\x00\xff", 1084818905618843912UL),
        ("tail", b"\x00\x01\x02\x03\x04\x05\x06\x07", 7UL),
      ],
      counts: [("max", 2147483647)],
      choice_text: Some("choice text"),
      choice_number: None,
      payload: b"\x00\x01",
    },
    {
      b64: "CJWCpu/HnoSRERD/////DxkAAAAAAAD4PyIQAAAAAAAAAAAAAAAAAOBYQCoDCgF4KhAKAXkSAhAgGecDAAAAAAAAMgUKAWEQATIFCgFiEAJAAEoDECAw",
      big: 1234567890123456789UL,
      zigzag: -2147483648,
      ratio: 1.5,
      scores: [0, 99.5],
      items: [("x", b"", 0UL), ("y", b"\x10\x20", 999UL)],
      counts: [("a", 1), ("b", 2)],
      choice_text: None,
      choice_number: Some(0),
      payload: b"\x10\x20\x30",
    },
  ]
  for case in cases {
    let decoded = decode_difficult(case.b64)
    assert_eq(decoded.big, case.big)
    assert_eq(decoded.zigzag, case.zigzag)
    assert_eq(decoded.ratio, case.ratio)
    assert_eq(decoded.scores, case.scores)
    assert_eq(decoded.items, case.items)
    assert_eq(decoded.counts, case.counts)
    assert_eq(decoded.choice_text, case.choice_text)
    assert_eq(decoded.choice_number, case.choice_number)
    assert_eq(decoded.payload, case.payload)
    assert_eq(encode_difficult(case), case.b64)
  }
}
