// Code generated by scripts/gen_codec_tests.py. DO NOT EDIT.

///|
test "bad/unknown_wire" {
  let bytes = @protobuf.base64_decode("Dg==")
  let reader = @protobuf.BytesReader::from_bytes(bytes) as &@protobuf.Reader
  inspect(
    try? (reader |> @protobuf.read_tag()),
    content="Err(UnknownWireType(6))",
  )
}

///|
test "bad/truncated_string" {
  let bytes = @protobuf.base64_decode("CgJh")
  let reader = @protobuf.BytesReader::from_bytes(bytes) as &@protobuf.Reader
  let (tag, wire_type) = reader |> @protobuf.read_tag()
  assert_eq(tag, 1U)
  assert_eq(wire_type, 2U)
  inspect(try? (reader |> @protobuf.read_string()), content="Err(EndOfStream)")
}

///|
test "bad/invalid_string" {
  let bytes = @protobuf.base64_decode("CgHC")
  let reader = @protobuf.BytesReader::from_bytes(bytes) as &@protobuf.Reader
  let (tag, wire_type) = reader |> @protobuf.read_tag()
  assert_eq(tag, 1U)
  assert_eq(wire_type, 2U)
  inspect(
    try? (reader |> @protobuf.read_string()),
    content="Err(InvalidString)",
  )
}
